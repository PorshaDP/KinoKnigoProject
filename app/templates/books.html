<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лента книг</title>
    <link rel="stylesheet" href="/static/styles/style-books.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>

<body>
    <div class="hamburger-menu">
        <input id="menu__toggle" type="checkbox" />
        <label class="menu__btn" for="menu__toggle">
            <span></span>
        </label>
        <ul class="menu__box">
            <li><a class="menu__item" href="#">Главная</a></li>
            <li><a class="menu__item" href="#">Мой профиль</a></li>
            <li><a class="menu__item" href="#">Смотреть</a></li>
            <li><a class="menu__item" href="#">Читать</a></li>
            <li><a class="menu__item" href="#">Мне повезет</a></li>
            <li><a class="menu__item" href="#">Гороскоп</a></li>
        </ul>
    </div>

    <header>
        <div class="title">
            <h1>Лента книг</h1>
        </div>
    </header>

    <main>
        <section>
            <div class="container">
                <div class="row mt-3">
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card">
                            <img src="static/images/красотка.jfif" class="card-img-top" alt="Красотка">
                            <div class="card-body">
                                <h5 class="card-title">Красотка</h5>
                                <p class="card-text">Финансовый магнат Эдвард Льюис, проезжая по ночному городу...</p>
                                <a href="#" class="btn btn-outline-dark">Подробнее</a>
                            </div>
                        </div>
                    </div>
                    <!-- Добавьте остальные карточки по тому же шаблону -->
                </div>
            </div>
        </section>

        <section>
            <h2>Рекомендации</h2>
            <form id="recommendation-form">
                <label for="book-title">Введите название книги:</label>
                <input type="text" id="book-title" name="title" placeholder="Название книги" required>
                <button type="submit">Получить рекомендации</button>
            </form>

            <div id="recommendations">
                <h3>Рекомендованные книги:</h3>
                <ul id="recommendation-list">
                    <!-- Список книг будет добавляться здесь -->
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Книжный и Кино сайт</p>
    </footer>

    <script>
        document.getElementById("recommendation-form").addEventListener("submit", async function (event) {
            event.preventDefault();

            const title = document.getElementById("book-title").value;

            try {
                const response = await fetch("/recommend_books", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ title: title })
                });

                if (!response.ok) throw new Error("Ошибка получения рекомендаций");

                const recommendations = await response.json();

                const recommendationList = document.getElementById("recommendation-list");
                recommendationList.innerHTML = "";
                recommendations.forEach(book => {
                    const li = document.createElement("li");
                    li.textContent = book.title || "Без названия";
                    recommendationList.appendChild(li);
                });
            } catch (error) {
                alert("Ошибка: " + error.message);
            }
        });
    </script>
</body>

</html>
